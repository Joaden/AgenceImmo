{% extends 'base.html.twig' %}

{% block title %}detail user{% endblock %}

{% block body %}



    <div class="row">

        {% for flashMessage in app.session.flashbag.get('success') %}
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                {{ flashMessage|raw }}
            </div>
        {% endfor %}

    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div class="dashboard-stat blue" style="background-color:  entitygetRolesStringcolorRole ">
            <div class="visual">
                <i class="fa fa-user"></i>
            </div>
            <div class="details">
                <div class="number" style="font-size: 20px">
                     entity.getRolesString 
                </div>
                <div class="desc">
                     'Status'|trans 
                </div>
            </div>
        </div>
    </div>
</div>
    <div class="row">

    <div class="col-md-12 col-sm-12 col-xs-12">

        <div class="col-lg-4 col-md-12 col-sm-12 col-xs-12">
            <div class="dashboard-stat blue-madison">
                <div class="visual">
                    <i class="fa fa-calendar"></i>
                </div>
                <div class="details">
                    <div class="number" style="font-size: 20px">
                         entity.userInfos.dateInscription|dateHFr 
                    </div>
                    <div class="desc">
                         'Inscription'|trans 
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-4 col-md-12 col-sm-12 col-xs-12">
            <div class="dashboard-stat blue-madison">
                <div class="visual">
                    <i class="fa fa-calendar"></i>
                </div>
                <div class="details">
                    <div class="number" style="font-size: 20px">
                         entity.userInfos.connexionTime|dateHFr
                    </div>
                    <div class="desc">
                         'Dernière connexion'|trans 
                    </div>
                </div>
            </div>
        </div>

        {% if unsubscribe != '' %}
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="dashboard-stat red">
                    <div class="visual">
                        <i class="fa fa-meh-o"></i>
                    </div>
                    <div class="details" style="position: relative;">
                        <div class="number" style="font-size: 20px">
                            {{ unsubscribe.date|dateFrSimple }}
                        </div>
                        <div class="desc">
                            {{ unsubscribe.comment }}
                        </div>
                    </div>
                </div>
            </div>
        {% endif %}

        </div>

        <div class="col-md-6 col-md-12 col-sm-12 col-xs-12" style="margin-top: 20px">

        <div class="tiles" style="margin-left: 15px">

            <div class="tile bg-blue" style="width: 200px!important;" data-toggle="modal" data-target="#modalResiliation">
                <div class="tile-body">
                    <i class="fa fa-sign-out"></i>
                </div>
                <div class="tile-object">
                    <div class="number">
                         'Résilier'|trans 
                    </div>
                </div>
            </div>
            <div class="tile bg-blue" style="width: 200px!important;"  data-toggle="modal" data-target="#modalResiliationDelete">
                <div class="tile-body">
                    <i class="fa fa-meh-o"></i>
                </div>
                <div class="tile-object">
                    <div class="number">
                        'Résilier et désinscrire'|trans 
                    </div>
                </div>
            </div>

            <div class="tile bg-blue" style="width: 200px!important;" data-toggle="modal" data-target="#modalRestPassword">
                <div class="tile-body">
                    <i class="fa fa-refresh"></i>
                </div>
                <div class="tile-object">
                    <div class="number">
                         'Régénérer mot de passe'|trans 
                    </div>
                </div>
            </div>

        </div>
        </div>

        <div class="col-md-6 col-sm-12 col-xs-12">


            <div class="portlet box purple">
                <div class="portlet-title">
                    <div class="caption">
                        <i class="fa fa-gift"></i>  'Commentaires'|trans 
                    </div>
                    <div class="tools">
                        <a href="javascript:;" class="expand">
                        </a>
                    </div>
                </div>
                <div class="portlet-body" style="display: none">
                    <form method="post" action="">
                        <textarea class="form-control js-comment" name="comment" rows="4"></textarea>
                        <input type="hidden" name="mail" value=" entity.mail ">
                        <div class="text-right" style="margin-top: 5px">
                            <button type="submit" class="btn green js-submit-comment"><i class="fa fa-pencil"></i> {{ 'Envoyer'|trans }}</button>
                        </div>
                    </form>
                </div>
            </div>

            <style>
                .comment-content{
                    border: 1px solid #8e44ad;
                    padding: 10px;
                }
            </style>

            {% for comment in comments %}
                <div class="row">
                    <div class="col-md-12">
                        <div class="comment-content">
                            {{ comment.date|dateHFr }}<br/>
                            {% if comment.byUser %}{{ comment.byUser.username }} - {% endif %}
                            {{ comment.comment|raw }}
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>

</div>
    <!-----------------Detail user addresses-------------->

    <div class="row" style="margin-top: 15px">

        <div class="js-form-user-edit">{% include '@BackOfficeUsers/UserDetail/user_edit_form.html.twig' with {'entity': entity, 'form': form} %}</div>

    </div>

    <!-- Modal reset password-->
    <div class="modal fade" id="modalRestPassword" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">{{ 'Fermer'|trans }}</span></button>
                    <h4 class="modal-title" id="myModalLabel"> 'Régénérer le mot de passe'|trans </h4>
                </div>
                <div class="modal-body text-center" style="font-size: 14px">
                     'Etes vous sûr de vouloir régénérer le mot de passe ?'|trans <br>
                     'Un nouveau mot de passe sera envoyé par mail.'|trans 
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal"> 'Non fermer'|trans </button>
                    <a   class="btn btn-primary js-modal-reset-password-valide"> 'Confirmer'|trans </a>
                </div>
            </div>
        </div>
    </div>



    <!-- Modal resiliation-->
    <div class="modal fade" id="modalResiliation" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">{'Fermer'|trans </span></button>
                    <h4 class="modal-title" id="myModalLabel">'Résiliation du compte'|trans </h4>
                </div>
                <div class="modal-body text-center" style="font-size: 14px">
                    {{ 'Etes vous sûr de vouloir procéder à la résiliation du compte ?'|trans }}<br><br>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">{{ 'Non fermer'|trans }}</button>
                    <a   class="btn btn-primary js-modal-resiliation-valide">{{ 'Confirmer'|trans }}</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal resiliation and delete-->
    <div class="modal fade" id="modalResiliationDelete" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">{{ 'Fermer'|trans }}</span></button>
                    <h4 class="modal-title" id="myModalLabel">{{ 'Résiliation et suppression du compte'|trans }}</h4>
                </div>
                <div class="modal-body text-center" style="font-size: 14px">
                    {{ 'Etes vous sûr de vouloir procéder à la résiliation et suppression du compte ?'|trans }}<br><br>
                    {{ 'Le membre n\'aura plus aucun accès au site avec ce compte.'|trans }}
               </div>
                <div class="modal-footer">
                    <button type="button" data-id="0" class="btn btn-danger" data-dismiss="modal">{{ 'Non fermer'|trans }}</button>
                    <a   class="btn btn-primary js-modal-resiliation-delete-valide" data-id="1">{{ 'Confirmer'|trans }}</a>
                </div>
            </div>
        </div>
    </div>


{% endblock %}

